# 本番環境 最終動作確認チェックリスト

## ✅ 基本機能確認

### 1. サイトアクセス
- [ ] https://super-ft-8e8f3.web.app にアクセス可能
- [ ] UI が正常に表示される
- [ ] レスポンシブデザインが動作する

### 2. 認証機能
- [ ] 「Googleでログイン」ボタンが動作
- [ ] ログイン後にユーザー情報が表示される
- [ ] ログアウトが正常に動作する

### 3. 画像アップロード機能
- [ ] 画像ファイルの選択・アップロードが可能
- [ ] 画像プレビューが表示される
- [ ] ファイル形式チェックが動作する

## ✅ API連携確認

### 4. 画像解析
- [ ] EXIF データの読み取りが動作
- [ ] GPS座標からの地域特定が動作
- [ ] Google Cloud Vision API で画像認識が動作
- [ ] ローカル画像解析（カラー分析）が動作

### 5. 天気API
- [ ] OpenWeather API で天気情報取得が動作
- [ ] GPS座標から天気情報が正しく取得される
- [ ] 天気情報が物語生成に反映される

### 6. AI物語生成
- [ ] Google Gemini API で物語生成が動作
- [ ] プロンプトに画像情報・天気情報が正しく含まれる
- [ ] 生成された物語に技術的な用語（カラーコードなど）が含まれない
- [ ] 昔話風の文体で生成される

## ✅ Firestore連携確認

### 7. データ保存
- [ ] 「クラウドに保存」ボタンが動作
- [ ] 物語データがFirestoreに正しく保存される
- [ ] 保存後に成功メッセージが表示される

### 8. お気に入り機能
- [ ] 「お気に入りに追加」ボタンが動作
- [ ] お気に入り状態の切り替えが正常
- [ ] お気に入りリストに正しく反映される

### 9. 履歴機能
- [ ] History画面に保存済み物語が表示される
- [ ] お気に入り物語が正しくフィルタリングされる
- [ ] 物語の詳細表示が動作する

## ✅ 追加機能確認

### 10. 音声合成
- [ ] 「音声で読み上げ」ボタンが動作
- [ ] Web Speech API で音声が再生される
- [ ] 再生中・停止の制御が正常

### 11. デバッグ情報
- [ ] APIテストボタンが動作（開発者向け）
- [ ] コンソールにデバッグ情報が適切に出力される
- [ ] エラーハンドリングが適切に動作する

## ✅ パフォーマンス・UX確認

### 12. レスポンス時間
- [ ] 画像アップロード→物語生成が30秒以内
- [ ] API呼び出しでタイムアウトが発生しない
- [ ] ローディング表示が適切に動作する

### 13. エラーハンドリング
- [ ] ネットワークエラー時の適切なメッセージ表示
- [ ] API制限に達した場合の適切な処理
- [ ] 無効な画像ファイルの適切な処理

### 14. セキュリティ
- [ ] 認証が必要な機能で未ログイン時の適切な処理
- [ ] Firestoreセキュリティルールが適切に動作
- [ ] 他ユーザーのデータへの不正アクセスが防止される

## 🔍 テスト手順

### シナリオ1: 基本的な物語生成フロー
1. サイトにアクセス
2. Googleでログイン
3. EXIF付き写真をアップロード
4. 物語生成を実行
5. 結果を確認
6. クラウドに保存
7. History画面で確認

### シナリオ2: EXIF無し画像での生成
1. EXIF情報の無い画像をアップロード
2. ランダム地域・日時での物語生成
3. 結果を確認

### シナリオ3: お気に入り機能
1. 物語を生成
2. お気に入りに追加
3. History画面でお気に入りフィルタを確認

## 📊 Firebase Console 確認事項

### Authentication
- [ ] Google認証プロバイダーが有効
- [ ] ユーザー登録が正常に記録される

### Firestore Database
- [ ] データベースリージョンが `asia-northeast1` (理想)
- [ ] セキュリティルールが適用されている
- [ ] users, stories コレクションが正常に作成される

### Hosting
- [ ] デプロイが最新版に更新されている
- [ ] カスタムドメイン設定（必要に応じて）

## 🚨 問題が発生した場合

### よくある問題と対処法

1. **API キーエラー**:
   - .env ファイルの設定確認
   - Firebase Console でAPI有効化確認

2. **認証エラー**:
   - Firebase Authentication設定確認
   - OAuth設定確認

3. **Firestore エラー**:
   - セキュリティルール確認
   - データベース作成確認

4. **デプロイエラー**:
   - `npm run build` で本番ビルド確認
   - `firebase deploy` の出力確認

## 📝 テスト結果記録

テスト実行日: ___________
テスト実行者: ___________

| 項目 | 結果 | 備考 |
|------|------|------|
| 基本機能 | ⭕/❌ |  |
| API連携 | ⭕/❌ |  |
| Firestore | ⭕/❌ |  |
| パフォーマンス | ⭕/❌ |  |

## 🎯 次のステップ

全ての機能が正常に動作している場合：
- [ ] 運用監視の設定
- [ ] ユーザーフィードバックの収集
- [ ] 機能拡張の検討

問題が発見された場合：
- [ ] 問題の詳細記録
- [ ] 修正対応
- [ ] 再テスト実行
